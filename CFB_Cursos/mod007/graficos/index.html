<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gráficos</title>
    <script defer src="script.js"></script>
</head>
<body>
    <div class="grafico" style="width: 500px; height: 500px;">
        <canvas id="grafico1">
    </div>

    </canvas>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
      const endpoint = 'https://69fe5103-12c0-4a89-a546-5ca9ee7bc528-00-uq97wq30hwxi.picard.replit.dev/'
      let valores = []
      const atualizaValores=()=>{
        fetch(endpoint)
        .then(res=>res.json())
        .then(res=>{
          valores[0] = res.disponibilidade
          valores[1] = res.qualidade
          valores[2] = res.performance
          grafico01.update() // atualiza os valores
        })
        .catch(erro=>{console.log(`Não foi possível rodar aplicação${erro}`)})
      }
      // let intervalo = setInterval(atualizaValores, 1000)

      const ctx = document.getElementById('grafico1');
      let valoresX = ['disponibilidade', 'qualidade', 'performance']
      let grafico01 = new Chart(ctx, {
          type: 'bar',
          data: {
            labels: valoresX, // as labels
            datasets: [{
              label: 'Título',
              data: valores, // os valores
              borderWidth: 1
            }]
          },
          options: {
            scales: {
              y: {
                beginAtZero: true
              }
            }
          }
        });
      </script>
</body>
</html>